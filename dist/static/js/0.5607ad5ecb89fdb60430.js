webpackJsonp([0],{"1Eci":function(t,e){},"1EsV":function(t,e){},IhR3:function(t,e,s){"use strict";var a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"btn"},[s("button",{on:{click:function(e){return t.toDescription(t.productid)}}},[t._v("立即购买")])])},staticRenderFns:[]};var o=s("VU/8")({props:["productid"],data:function(){return{}},methods:{toDescription:function(t){this.$router.push({path:"description",query:{productid:this.productid}})}}},a,!1,function(t){s("1EsV")},"data-v-3da6cd88",null);e.a=o.exports},fWJA:function(t,e){},lZTe:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("Au9i");var a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field"},[s("mt-field",{attrs:{placeholder:"收货人姓名",type:"input"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),s("mt-field",{attrs:{placeholder:"手机号码",type:"number"},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}}),t._v(" "),s("mt-field",{attrs:{placeholder:"收货地址",type:"textarea",rows:"4"},model:{value:t.introduction,callback:function(e){t.introduction=e},expression:"introduction"}})],1)},staticRenderFns:[]};var o=s("VU/8")({data:function(){return{username:"",tel:"",introduction:"",toastError:null}},created:function(){this.getList()},methods:{}},a,!1,function(t){s("fWJA")},"data-v-5b92bc5c",null).exports,n=s("IhR3"),i=s("mtWM"),r=s.n(i),c={components:{userinfoX:o,buybtnX:n.a},data:function(){return{goodsData:"",markingPrice:0,selectAttr:[],productId:"",userInfo:{username:"",tel:"",introduction:""},selectData:{num:1,attr:"",unique:""}}},created:function(){this.getInfo()},methods:{getInfo:function(){var t=this,e=this.$route.query.productid;this.productId=e,r.a.get("http://app.taijidjk69.com/api/h5/good/ProductAttrDetail?productId="+parseInt(e)).then(function(e){t.goodsData=e.data.data}).catch(function(e){console.log(e),t.$toast({positon:"middle"})})},toPayment:function(){var t=this;if(console.log(this.goodsData.unique),console.log(this.goodsData),0==this.userInfo.username.length||0==this.userInfo.introduction.length||this.selectAttr.length!==this.goodsData.productAttr.length)return this.$toast({message:"亲亲还有未选择的哦~",positon:"middle"}),!1;if(!/^1[34578]\d{9}$/.test(this.userInfo.tel))return this.$toast({message:"亲亲手机号码不正确哦~",positon:"middle"}),!1;var e={cartNum:this.selectData.num,productId:this.productId,uniqueId:this.goodsData.unique,payType:"weixin",name:this.userInfo.username,phone:this.userInfo.tel,address:this.userInfo.introduction};console.log(this.productId),r.a.get("http://app.taijidjk69.com/api/h5/good/pay",{params:e}).then(function(e){if(1===e.data.status){var s={order_id:e.data.data.order_id,ProductName:e.data.data.ProductName,price:e.data.data.price};r.a.get("http://app.taijidjk69.com/api/h5/good/wxpayurl",{params:s}).then(function(t){window.location.href=t.data.mweb_url,console.log("获取到支付url")}).catch(function(e){console.log(e),t.$toast({message:"哎呀~开了点小差",positon:"middle"})})}}).catch(function(t){console.log(t),alert("好嗨呀......")})},select:function(t,e){console.log(t),this.selectAttr[e]=t,this.selectAttr.length==this.goodsData.productAttr.length?this.setPrice():this.getInfo()},setPrice:function(){for(var t="",e="",s=0,a=this.selectAttr.length;s<a;s++)t+=this.selectAttr[s]+",";t=t.substring(0,t.length-1),this.selectData.attr=t,console.log(t);for(var o=this.selectAttr.length-1;o>=0;o--)e+=0!=o?this.selectAttr[o]+",":this.selectAttr[o];console.log(e),this.goodsData.pirce=this.goodsData.productValue[e].price,this.markingPrice=this.goodsData.productValue[e].cost,this.goodsData.image=this.goodsData.productValue[e].image,this.goodsData.unique=this.goodsData.productValue[e].unique},minus:function(){this.selectData.num>1&&this.selectData.num--},add:function(){this.selectData.num++}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goods-description"},[s("div",{staticClass:"goods"},[s("img",{attrs:{src:t.goodsData.image,alt:""}}),t._v(" "),s("div",{staticClass:"description"},[s("span",[t._v("价格：￥"+t._s(t.goodsData.pirce)+" "),s("del",{staticStyle:{color:"#aaa"}},[t._v("￥"+t._s(t.markingPrice))])]),t._v(" "),s("span",[t._v("已选："+t._s(t.selectData.attr))])])]),t._v(" "),s("div",{staticClass:"color-size"},[t._l(t.goodsData.productAttr,function(e,a){return t.goodsData.productAttr?s("div",{key:a,staticClass:"color"},[s("span",[t._v(t._s(e.attr_name))]),t._v(" "),s("ul",t._l(e.attr_values,function(e,o){return s("li",{key:o,class:t.selectAttr[a]==e?"activa":"",on:{click:function(s){return t.select(e,a)}}},[t._v(t._s(e))])}),0)]):t._e()}),t._v(" "),s("div",{staticClass:"counts"},[t._m(0),t._v(" "),s("div",{staticClass:"count-data"},[s("span",{staticClass:"minus",on:{click:t.minus}},[t._v("-")]),t._v(" "),s("span",{staticClass:"number"},[t._v(t._s(t.selectData.num))]),t._v(" "),s("span",{staticClass:"add",on:{click:t.add}},[t._v("+")])])])],2),t._v(" "),s("div",{staticClass:"field"},[s("mt-field",{staticClass:"mint-field-core",attrs:{placeholder:"收货人姓名"},model:{value:t.userInfo.username,callback:function(e){t.$set(t.userInfo,"username",e)},expression:"userInfo.username"}}),t._v(" "),s("mt-field",{staticClass:"mint-field-core",attrs:{placeholder:"手机号码",type:"number"},model:{value:t.userInfo.tel,callback:function(e){t.$set(t.userInfo,"tel",e)},expression:"userInfo.tel"}}),t._v(" "),s("mt-field",{staticClass:"mint-field-core",attrs:{placeholder:"收货地址",type:"textarea",rows:"4"},model:{value:t.userInfo.introduction,callback:function(e){t.$set(t.userInfo,"introduction",e)},expression:"userInfo.introduction"}})],1),t._v(" "),s("div",{on:{click:t.toPayment}},[s("buybtn-x")],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",[this._v("数量")])])}]};var l=s("VU/8")(c,u,!1,function(t){s("1Eci")},"data-v-e505167a",null);e.default=l.exports}});
//# sourceMappingURL=0.5607ad5ecb89fdb60430.js.map